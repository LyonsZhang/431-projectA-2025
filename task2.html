<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Liangliang Zhang, Ph.D.">
<meta name="dcterms.date" content="2025-09-11">

<title>Task B: Create a dashboard and blog in your website – 431 Project A</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-7ad6542725e80d1433b1f8ee26c2a1fc.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">431 Project A</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./task1.html"> 
<span class="menu-text">Task A: Website</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./task2.html" aria-current="page"> 
<span class="menu-text">Task B: Dashboard and Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./dashboard1.html"> 
<span class="menu-text">Dashboard Example 1</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./dashboard2.html"> 
<span class="menu-text">Dashboard Example 2</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-the-data" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">The Data</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-the-data">    
        <li>
    <a class="dropdown-item" href="./data1.html">
 <span class="dropdown-text">Data Development</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./data2.html">
 <span class="dropdown-text">Using NHANES data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./data3.html">
 <span class="dropdown-text">Using Something Else</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-study-1" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Study 1</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-study-1">    
        <li>
    <a class="dropdown-item" href="./study1a.html">
 <span class="dropdown-text">Required Study 1 Analyses</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./study1b.html">
 <span class="dropdown-text">Study 1 Report Specifications</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-study-2" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Study 2</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-study-2">    
        <li>
    <a class="dropdown-item" href="./study2a.html">
 <span class="dropdown-text">Required Study 2 Analyses</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./study2b.html">
 <span class="dropdown-text">Study 2 Report Specifications</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#getting-started-with-quarto-dashboard" id="toc-getting-started-with-quarto-dashboard" class="nav-link active" data-scroll-target="#getting-started-with-quarto-dashboard">Getting Started with Quarto Dashboard</a></li>
  <li><a href="#data-development-and-analyses" id="toc-data-development-and-analyses" class="nav-link" data-scroll-target="#data-development-and-analyses">Data Development and Analyses</a></li>
  <li><a href="#create-and-publish-a-quarto-dashboard" id="toc-create-and-publish-a-quarto-dashboard" class="nav-link" data-scroll-target="#create-and-publish-a-quarto-dashboard">Create and Publish a Quarto Dashboard</a></li>
  <li><a href="#examples-of-quarto-dashboard-using-r-coding" id="toc-examples-of-quarto-dashboard-using-r-coding" class="nav-link" data-scroll-target="#examples-of-quarto-dashboard-using-r-coding">Examples of Quarto Dashboard using R coding</a></li>
  <li><a href="#the-five-key-elements" id="toc-the-five-key-elements" class="nav-link" data-scroll-target="#the-five-key-elements">The Five Key Elements</a></li>
  <li><a href="#create-and-publish-a-blog" id="toc-create-and-publish-a-blog" class="nav-link" data-scroll-target="#create-and-publish-a-blog">Create and Publish a Blog</a></li>
  <li><a href="#grading-task-b" id="toc-grading-task-b" class="nav-link" data-scroll-target="#grading-task-b">Grading Task B</a></li>
  <li><a href="#dashboard-recommendations" id="toc-dashboard-recommendations" class="nav-link" data-scroll-target="#dashboard-recommendations">Dashboard Recommendations</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Task B: Create a dashboard and blog in your website</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Liangliang Zhang, Ph.D. </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2025-09-11</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="getting-started-with-quarto-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="getting-started-with-quarto-dashboard">Getting Started with Quarto Dashboard</h2>
<ul>
<li>Please read through the tutorials for Quarto Dashboards <a href="https://quarto.org/docs/dashboards/">https://quarto.org/docs/dashboards/</a></li>
</ul>
</section>
<section id="data-development-and-analyses" class="level2">
<h2 class="anchored" data-anchor-id="data-development-and-analyses">Data Development and Analyses</h2>
<ol type="1">
<li><p>Understand the Data and Define Hypotheses. Begin by familiarizing yourself with the dataset and formulating hypothesis-driven questions to guide your analysis.</p></li>
<li><p>Identify Key Variables and Samples. Select the target datasets, focusing on the variables and samples most relevant to your hypotheses and objectives.</p></li>
<li><p>Develop an Analysis Plan Outline a clear plan for your analyses, detailing the methods and statistical approaches you will use. Execute your analyses systematically.</p></li>
</ol>
<p>I have provided you with <a href="./data1.html">The Data</a>, which includes instructions for accessing data for Project A. You can either use <a href="./data2.html">data from NHANES</a> or obtain it from <a href="./data3.html">another source</a>. If you already know the analyses you plan to perform, there’s no need to review <a href="./study1a.html">Study 1</a> and <a href="./study2a.html">Study 2</a>. However, if you’re unsure, these studies can serve as helpful references.</p>
<p>For <a href="./study1b.html">Study 1</a>, you’ll find detailed instructions on the required analyses and the report specifications to follow. Similarly, for <a href="./study2b.html">Study 2</a>, we provide guidance on the required analyses and detailed report specifications to ensure you have everything you need.</p>
</section>
<section id="create-and-publish-a-quarto-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="create-and-publish-a-quarto-dashboard">Create and Publish a Quarto Dashboard</h2>
<ul>
<li>Build Your Dashboard from Scratch.
<ul>
<li>Following the tutorials, develop your Quarto dashboard incrementally and integrate your statistical analyses and visualizations directly into the file as you progress.</li>
</ul></li>
<li>Customize a Quarto Template
<ul>
<li>Utilize Dashboard Quarto files from online resources and tailor them to your needs. Replace the existing content, adapt the provided layouts and functions, and integrate your own analyses and results.</li>
</ul></li>
<li>Embed the Quarto dashboard files into your website folder. You may need to iterate by rerunning the files, uploading them to GitHub, and checking whether the website displays correctly. Your GitHub reposotory might consist of many quarto files, you might need to rerun each of them.</li>
</ul>
</section>
<section id="examples-of-quarto-dashboard-using-r-coding" class="level2">
<h2 class="anchored" data-anchor-id="examples-of-quarto-dashboard-using-r-coding">Examples of Quarto Dashboard using R coding</h2>
<ul>
<li><a href="./dashboard1.html">Dashboard Example 1</a>, Labor and Delivery Dashboard. You can access and download the associated <a href="https://drive.google.com/drive/folders/1toMxKpK_3jAL_dXXmR0juEsFLmMfmEQK?usp=sharing">quarto file</a>.
<ul>
<li>The Labor and Delivery Dashboard provides a static yet comprehensive summary of labor and delivery data, focusing on key metrics such as maternal age, delivery methods, and infant weight. Using clear and visually appealing charts, the dashboard presents data in a structured manner, allowing for straightforward interpretation of trends and patterns. For example, bar charts and tables are used to display the distribution of delivery methods and infant outcomes. This dashboard is an informative tool for understanding labor trends and maternal-infant health outcomes, offering a concise overview of the data for healthcare professionals and researchers. While not interactive, its design ensures that the information is accessible and easy to interpret.</li>
</ul></li>
<li><a href="./dashboard2.html">Dashboard Example 2</a>, Palmer Penguins. You can download the <a href="https://drive.google.com/drive/folders/1aHmlkjJb5zqHqdNCx4RuF7aEQolXmm88?usp=sharing">quota file</a>.
<ul>
<li>The Palmer Penguins dashboard provides an engaging and interactive exploration of data about three penguin species—Adélie, Chinstrap, and Gentoo—collected from the Palmer Archipelago in Antarctica. This dashboard features clean and visually appealing charts, allowing users to analyze key variables such as species, body mass, flipper length, bill dimensions, and habitat islands. Using interactive visualizations like scatter plots and bar charts, users can dynamically filter the data by species or islands to uncover patterns and trends in penguin traits. The dashboard showcases the versatility of Quarto in creating interactive, data-driven applications that enable users to explore relationships and gain insights from real-world datasets intuitively.</li>
</ul></li>
<li>You can embed the dashboard quarto files in your website folder and edit it to display your own analyses.</li>
</ul>
</section>
<section id="the-five-key-elements" class="level2">
<h2 class="anchored" data-anchor-id="the-five-key-elements">The Five Key Elements</h2>
<p>Dr.&nbsp;Zhang will be happy if your dashboard clearly includes at least the following five elements:</p>
<ol type="1">
<li><p>Purposeful Design: Focused objectives with clear KPIs tailored to the audience.</p></li>
<li><p>Effective Visualizations: Data presented through appropriate and easy-to-interpret charts and graphs.</p></li>
<li><p>User-Friendly Layout: Intuitive structure with consistent design and interactive features.</p></li>
<li><p>Accurate Data: Real-time or relevant data updates with clear timestamps.</p></li>
<li><p>Accessibility: Responsive design, cross-device compatibility, and easy navigation.</p></li>
</ol>
</section>
<section id="create-and-publish-a-blog" class="level2">
<h2 class="anchored" data-anchor-id="create-and-publish-a-blog">Create and Publish a Blog</h2>
<ul>
<li>Create a Quarto file and begin drafting a report to introduce your dashboard.</li>
<li>Explain the process of building the dashboard, the hypotheses you tested, the types of analyses performed, and the results and conclusions you derived.</li>
<li>A blog is also an appealing way to connect your thoughts with the world, and including non-professional stuff is OK, too, of course.</li>
</ul>
</section>
<section id="grading-task-b" class="level2">
<h2 class="anchored" data-anchor-id="grading-task-b">Grading Task B</h2>
<ul>
<li>Task B is worth 45 points.</li>
<li>Students will receive all 45 points if …
<ul>
<li>their Task B dashboard was built using Quarto, and</li>
<li>their Task B dashboard clearly includes <a href="#the-five-key-elements">the five key elements listed above</a>, and</li>
<li>their Task B Blog was built using Quarto, and</li>
<li>their Task B Blog has no unfixed typos or grammatical issues that Dr.&nbsp;Zhang notices in his review.</li>
</ul></li>
</ul>
</section>
<section id="dashboard-recommendations" class="level2">
<h2 class="anchored" data-anchor-id="dashboard-recommendations">Dashboard Recommendations</h2>
<ol type="1">
<li><p>Content and Analysis (30%) Clear and accurate presentation of the data. Appropriate application of statistical methods and analyses. Logical interpretation and explanation of the results. Hypotheses and conclusions are supported by the data.</p></li>
<li><p>Dashboard Design and Usability (25%) The dashboard layout is intuitive, well-organized, and visually appealing. Key information is easy to locate and understand. Appropriate use of visualizations (e.g., plots, charts) to effectively communicate insights. Interactive features (if included) function properly and enhance the user experience.</p></li>
<li><p>Code Quality and Documentation (20%) Code is clean, well-organized, and follows consistent formatting. Proper use of comments to explain key sections of the code. Variables and functions are named meaningfully. No redundant or unnecessary code.</p></li>
<li><p>Integration and Functionality (15%) The Quarto dashboard functions as intended when deployed (e.g., on GitHub Pages). All required components (e.g., data, analyses, visualizations) are successfully integrated into the file. Dashboard updates dynamically to reflect the underlying data or analysis changes.</p></li>
<li><p>Report and Explanation (10%) A written report accompanies the dashboard, explaining its purpose, construction process, and key insights. The report provides a clear explanation of the hypotheses, analyses, and results. The connection between the dashboard and the report is evident and well-articulated. This rubric ensures a comprehensive evaluation of both the technical and conceptual aspects of the Quarto dashboard project.</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>